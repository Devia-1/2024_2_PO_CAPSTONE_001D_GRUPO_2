webpackJsonp([1],{"/KV2":function(e,t){},"9J6t":function(e,t){},KAkA:function(e,t,a){e.exports=a.p+"static/img/cafealas.ce90421.png"},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),r=a("Xxa5"),n=a.n(r),o=a("mvHQ"),i=a.n(o),c=a("exGp"),l=a.n(c),u="http://localhost/botanero-ventas/api/",d={registrar:function(e,t){var a=this;return l()(n.a.mark(function s(){var r,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(u+t,{method:"post",body:i()(e)});case 2:return r=a.sent,a.next=5,r.json();case 5:return o=a.sent,a.abrupt("return",o);case 7:case"end":return a.stop()}},s,a)}))()},obtenerConDatos:function(e,t){var a=this;return l()(n.a.mark(function s(){var r,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(u+t,{method:"post",body:i()(e)});case 2:return r=a.sent,a.next=5,r.json();case 5:return o=a.sent,a.abrupt("return",o);case 7:case"end":return a.stop()}},s,a)}))()},obtener:function(e){var t=this;return l()(n.a.mark(function a(){var s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(u+e);case 2:return s=t.sent,t.next=5,s.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}},a,t)}))()},eliminar:function(e,t){var a=this;return l()(n.a.mark(function s(){var r,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch(u+e,{method:"post",body:i()(t)});case 2:return r=a.sent,a.next=5,r.json();case 5:return o=a.sent,a.abrupt("return",o);case 7:case"end":return a.stop()}},s,a)}))()}},p={name:"Login",data:function(){return{correo:"",password:"",cargando:!1}},methods:{ingresar:function(){var e=this;if(this.correo)if(this.password){this.cargando=!0;var t={correo:this.correo,password:this.password};d.obtenerConDatos(t,"iniciar_sesion.php").then(function(t){t.resultado?(e.$buefy.toast.open({message:"Datos correctos. Bienvenido",type:"is-success"}),localStorage.setItem("loggedIn",!0),localStorage.setItem("role",t.role),localStorage.setItem("nombre",t.nombre),"admin"===t.role?e.$router.push({name:"AdminDashboard"}):"user"===t.role&&e.$router.push({name:"UserDashboard"}),e.cargando=!1):(e.$buefy.toast.open({message:"Datos incorrectos. Verifica tu información",type:"is-danger"}),e.cargando=!1)}).catch(function(){e.$buefy.toast.open({message:"Error en la conexión. Inténtalo de nuevo",type:"is-danger"}),e.cargando=!1})}else this.$buefy.toast.open({message:"Debes colocar la contraseña",type:"is-warning"});else this.$buefy.toast.open({message:"Debes colocar el correo",type:"is-warning"})}}},m={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-fullheight fondo"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("p",{staticClass:"title is-1 has-text-weight-bold has-text-white has-text-centered titulo"},[e._v("\n                Bienvenido a Cafeteria Alas  "),s("br"),e._v(" "),s("b-icon",{attrs:{icon:"account",size:"is-large"}}),e._v("\n                Inicio de sesión\n            ")],1),e._v(" "),s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-5-tablet is-6-desktop is-6-widescreen"},[s("form",{staticClass:"box login-box",attrs:{action:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.ingresar.apply(null,arguments))}}},[s("img",{staticClass:"logo",attrs:{src:a("KAkA"),alt:"Logo"}}),e._v(" "),s("p",{staticClass:"title is-3 has-text-centered"}),e._v(" "),s("b-field",[s("b-input",{attrs:{placeholder:"Correo electrónico",type:"email",icon:"email"},model:{value:e.correo,callback:function(t){e.correo=t},expression:"correo"}})],1),e._v(" "),s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"Contraseña","password-reveal":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),s("div",{staticClass:"field has-text-centered"},[s("b-button",{attrs:{"icon-left":"login",type:"is-primary",size:"is-large"},on:{click:e.ingresar}},[e._v("Ingresar")])],1)],1)])]),e._v(" "),s("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.cargando,callback:function(t){e.cargando=t},expression:"cargando"}})],1)])])},staticRenderFns:[]};var v=a("VU/8")(p,m,!1,function(e){a("a7qD")},"data-v-217e76fa",null).exports,f={name:"CambiarPassword",data:function(){return{password:{actual:"",nueva:"",repiteNueva:""},errores:[],cargando:!1}},methods:{cambiarPassword:function(){var e=this;return l()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.validarDatos();case 2:t.sent&&(e.errores=[],e.$buefy.dialog.confirm({message:"¿Cambiar contraseña? Deberás iniciar sesión de nuevo",onConfirm:function(){e.cargando=!0;var t={id:localStorage.getItem("idUsuario"),password:e.password.repiteNueva};d.registrar(t,"cambiar_password.php").then(function(t){t&&(e.$buefy.toast.open("Contraseña actualizada"),e.cargando=!1,localStorage.removeItem("logeado"),window.location.reload())})}}));case 4:case"end":return t.stop()}},t,e)}))()},verificarContraActual:function(){var e=this;return l()(n.a.mark(function t(){var a,s,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("idUsuario"),s={password:e.password.actual,id:a},t.next=4,d.obtenerConDatos(s,"verificar_password.php");case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}},t,e)}))()},validarDatos:function(){var e=this;return l()(n.a.mark(function t(){var a;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.verificarContraActual();case 2:if(a=t.sent,e.errores=[],e.password.actual||e.errores.push("Debes colocar la contraseña actual."),a||e.errores.push("La contraseña actual ingresada no es correcta."),e.password.nueva?e.validPass(e.password.nueva)||e.errores.push("La contraseña nueva debe ser valida."):e.errores.push("Debes colocar la contraseña nueva."),e.password.repiteNueva?e.password.nueva!=e.password.repiteNueva&&e.errores.push("Las contraseñas deben coincidir."):e.errores.push("Debes repetir la contraseña nueva."),e.errores.length){t.next=10;break}return t.abrupt("return",!0);case 10:case"end":return t.stop()}},t,e)}))()},validPass:function(e){return/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/.test(e)}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("p",{staticClass:"title is-1 has-text-weight-bold"},[e._v("\n        Cambiar contraseña\n    ")]),e._v(" "),e._m(0),e._v(" "),a("b-field",{attrs:{label:"Contraseña actual"}},[a("b-input",{attrs:{type:"password",placeholder:"Contraseña actual","password-reveal":""},model:{value:e.password.actual,callback:function(t){e.$set(e.password,"actual",t)},expression:"password.actual"}})],1),e._v(" "),a("b-field",{attrs:{label:"Nueva contraseña"}},[a("b-input",{attrs:{type:"password",placeholder:"Nueva contraseña","password-reveal":""},model:{value:e.password.nueva,callback:function(t){e.$set(e.password,"nueva",t)},expression:"password.nueva"}})],1),e._v(" "),a("b-field",{attrs:{label:"Repite la nueva contraseña"}},[a("b-input",{attrs:{type:"password",placeholder:"Repite la nueva contraseña","password-reveal":""},model:{value:e.password.repiteNueva,callback:function(t){e.$set(e.password,"repiteNueva",t)},expression:"password.repiteNueva"}})],1),e._v(" "),e.errores.length>0?a("ul",e._l(e.errores,function(t){return a("li",{key:t,staticClass:"has-text-danger has-text-centered"},[e._v(e._s(t))])}),0):e._e(),e._v(" "),a("div",{staticClass:"has-text-centered"},[a("b-button",{attrs:{type:"is-success",size:"is-large","icon-left":"check"},on:{click:e.cambiarPassword}},[e._v("Cambiar contraseña")])],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("article",{staticClass:"message is-info"},[a("div",{staticClass:"message-body"},[a("p",[e._v("Consideraciones para la contraseña, debe contener:")]),e._v(" "),a("ul",[a("li",[e._v("Al menos un número")]),e._v(" "),a("li",[e._v("Al menos una mayúscula")]),e._v(" "),a("li",[e._v("Al menos una minúscula")]),e._v(" "),a("li",[e._v("Mínimo 8 caracteres")]),e._v(" "),a("li",[e._v("Deberás inciar sesión nuevamente")])])])])}]},g=a("VU/8")(f,h,!1,null,null,null).exports,b=a("W3Iv"),_=a.n(b),j=a("BO1k"),w=a.n(j),y=a("d7EF"),x=a.n(y),k=a("fZjL"),C=a.n(k),I=a("ikxi"),D=a.n(I),z=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],U=["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],S={generarUrlImagen:function(e){return"http://localhost/botanero-ventas/api"+e},generarGrafica:function(e,t,a,s){this.resetearGrafica(t,a,s);var r=e,n={labels:r.map(function(e){return e[C()(e)[0]]}),datasets:[{label:"Total ",data:r.map(function(e){return e.totalVentas}),backgroundColor:"#"+Math.floor(16777215*Math.random()).toString(16),fill:!1,tension:.1,borderWidth:3}]},o=document.getElementById(s);new D.a(o,{type:"line",data:n,options:{responsive:!0,lineTension:1,scales:{yAxes:[{ticks:{beginAtZero:!0,padding:25}}]}}})},resetearGrafica:function(e,t,a){var s=document.querySelector(e);document.querySelector(t).remove();var r=document.createElement("canvas");r.setAttribute("id",a),s.appendChild(r)},calcularTotales:function(e){var t=0;return e.forEach(function(e){t+=parseFloat(e.totalVentas)}),t},validar:function(e){var t=[],a=!0,s=!1,r=void 0;try{for(var n,o=w()(_()(e));!(a=(n=o.next()).done);a=!0){var i=n.value,c=x()(i,2),l=c[0];c[1]&&l||t.push("Debes colocar el valor de "+l)}}catch(e){s=!0,r=e}finally{try{!a&&o.return&&o.return()}finally{if(s)throw r}}return t},cambiarNumeroANombreMes:function(e){for(var t=0;t<e.length;t++){var a=e[t].mes;e[t].mes=z[a-1]}return e},cambiarDiaSemana:function(e){for(var t=0;t<e.length;t++){var a=e[t].numeroDia;e[t].dia=U[a-1]}return e}},$={name:"DatosUsuario",props:["usuario"],data:function(){return{errores:[]}},methods:{registrar:function(){var e={correo:this.usuario.correo,nombre:this.usuario.nombre,telefono:this.usuario.telefono};this.errores=S.validar(e),this.errores.length>0||this.$emit("registrado",this.usuario)}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[e.errores.length>0?a("ul",e._l(e.errores,function(t){return a("li",{key:t,staticClass:"has-text-danger has-text-centered"},[e._v(e._s(t))])}),0):e._e(),e._v(" "),a("b-field",{attrs:{label:"Correo electrónico"}},[a("b-input",{attrs:{type:"email",placeholder:"Correo del usuario"},model:{value:e.usuario.correo,callback:function(t){e.$set(e.usuario,"correo",t)},expression:"usuario.correo"}})],1),e._v(" "),a("b-field",{attrs:{label:"Nombre"}},[a("b-input",{attrs:{type:"text",placeholder:"Nombre del usuario"},model:{value:e.usuario.nombre,callback:function(t){e.$set(e.usuario,"nombre",t)},expression:"usuario.nombre"}})],1),e._v(" "),a("b-field",{attrs:{label:"Teléfono"}},[a("b-input",{attrs:{type:"text",placeholder:"Teléfono del usuario"},model:{value:e.usuario.telefono,callback:function(t){e.$set(e.usuario,"telefono",t)},expression:"usuario.telefono"}})],1),e._v(" "),a("div",{staticClass:"has-text-centered"},[a("b-button",{attrs:{type:"is-success",size:"is-large","icon-left":"check"},on:{click:e.registrar}},[e._v("Registrar")])],1)],1)},staticRenderFns:[]},E=a("VU/8")($,A,!1,null,null,null).exports,L={name:"DatosConfiguracion",props:["datos"],data:function(){return{previewImage:null,cambiaImagen:!1}},mounted:function(){var e=this;return l()(n.a.mark(function t(){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}))()},methods:{registrar:function(){this.datos.logo=this.previewImage,this.datos.cambiaImagen=this.cambiaImagen,this.$emit("registrado",this.datos)},pickFile:function(){var e=this,t=this.$refs.fileInput.files;if(t&&t[0]){var a=new FileReader;a.onload=function(t){e.previewImage=t.target.result,e.cambiaImagen=!0},a.readAsDataURL(t[0]),this.$emit("input",t[0])}}},watch:{$props:{handler:function(e,t){this.previewImage=S.generarUrlImagen(e.datos.logo)},deep:!0}}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("b-field",{attrs:{label:"Nombre del local"}},[a("b-input",{attrs:{type:"text",placeholder:"Nombre de tu local"},model:{value:e.datos.nombre,callback:function(t){e.$set(e.datos,"nombre",t)},expression:"datos.nombre"}})],1),e._v(" "),a("b-field",{attrs:{label:"Teléfono"}},[a("b-input",{attrs:{type:"text",placeholder:"Número de teléfono"},model:{value:e.datos.telefono,callback:function(t){e.$set(e.datos,"telefono",t)},expression:"datos.telefono"}})],1),e._v(" "),a("b-field",{attrs:{label:"Número de mesas"}},[a("b-numberinput",{attrs:{placeholder:"Mesas",min:1},model:{value:e.datos.numeroMesas,callback:function(t){e.$set(e.datos,"numeroMesas",t)},expression:"datos.numeroMesas"}})],1),e._v(" "),a("div",{staticClass:"field is-horizontal"},[a("div",{staticClass:"field-body"},[a("div",{staticClass:"file is-primary"},[a("label",{staticClass:"file-label"},[a("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",name:"resume"},on:{input:e.pickFile}}),e._v(" "),e._m(0)])])])]),e._v(" "),a("div",{staticClass:"imagen",attrs:{id:"preview"}},[a("img",{attrs:{src:e.previewImage}})]),e._v(" "),a("div",{staticClass:"has-text-centered"},[a("b-button",{attrs:{type:"is-success",size:"is-large","icon-left":"check"},on:{click:e.registrar}},[e._v("Registrar")])],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"file-cta"},[t("span",{staticClass:"file-label"},[this._v("\n                            Seleccionar logo\n                        ")])])}]};var R={name:"ConfiguracionInicial",components:{DatosConfiguracion:a("VU/8")(L,N,!1,function(e){a("o2Zv")},null,null).exports,DatosUsuario:E},data:function(){return{cargando:!1,datosLocal:{nombre:"",telefono:"",numeroMesas:1},usuario:{correo:"",nombre:"",telefono:""},mostrarIniciar:!0,mostrarDatosLocal:!1,mostrarDatosUsuario:!1,mensajes:[]}},methods:{iniciar:function(){var e=this;this.cargando=!0,d.obtener("crear_tablas.php").then(function(t){e.mensajes=t,e.$buefy.toast.open({message:"Base de datos creada",type:"is-success"}),e.cargando=!1,e.mostrarIniciar=!1,e.mostrarDatosLocal=!0})},onDatosRegistrado:function(e){var t=this;this.cargando=!0,this.datosLocal=e,d.registrar(this.datosLocal,"registrar_datos_local.php").then(function(e){e&&(t.$buefy.toast.open({message:"Información registrada",type:"is-success"}),t.cargando=!1,t.mostrarDatosLocal=!1,t.mostrarDatosUsuario=!0)})},onUsuarioRegistrado:function(e){var t=this;this.cargando=!0,this.usuario=e,d.registrar(this.usuario,"registrar_usuario.php").then(function(e){e&&(t.$buefy.toast.open({message:"Usuario registrado. Recuerda que la contraseña por defecto es PacoHunterDev",type:"is-success"}),t.cargando=!1,window.location.reload())})}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"container"},[a("p",{staticClass:"title is-1 has-text-weight-bold"},[a("b-icon",{attrs:{icon:"application-cog-outline",size:"is-large",type:"is-primary"}}),e._v("\n        Configurar \n    ")],1),e._v(" "),e.mostrarIniciar?a("div",{staticClass:"is-centered"},[a("p",{staticClass:"title is-4 has-text-weight-bold"},[e._v("\n            Pulsa el siguiente botón para iniciar\n        ")]),e._v(" "),a("b-button",{attrs:{type:"is-success","icon-left":"play"},on:{click:e.iniciar}},[e._v("\n            Iniciar\n        ")]),e._v(" "),a("ul",e._l(e.mensajes,function(t){return a("li",{key:t},[e._v(e._s(t))])}),0)],1):e._e(),e._v(" "),e.mostrarDatosLocal?a("div",[a("p",{staticClass:"title is-4 has-text-weight-bold"},[e._v("\n        Datos del local\n        ")]),e._v(" "),a("datos-configuracion",{attrs:{datos:e.datosLocal},on:{registrado:e.onDatosRegistrado}})],1):e._e(),e._v(" "),e.mostrarDatosUsuario?a("div",[a("p",{staticClass:"title is-4 has-text-weight-bold"},[e._v("\n        Datos del usuario\n        ")]),e._v(" "),a("datos-usuario",{attrs:{usuario:e.usuario},on:{registrado:e.onUsuarioRegistrado}})],1):e._e(),e._v(" "),a("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.cargando,callback:function(t){e.cargando=t},expression:"cargando"}})],1)},staticRenderFns:[]},P=a("VU/8")(R,F,!1,null,null,null).exports,V={name:"Encabezado",data:function(){return{expandOnHover:!1,expandWithDelay:!1,mobile:"reduce",reduce:!1,datosLocal:{},nombreUsuario:"",logo:null}},mounted:function(){this.obtenerDatos(),this.nombreUsuario=localStorage.getItem("nombreUsuario"),this.logo=S.generarUrlImagen(this.datosLocal.logo)},methods:{irAPerfil:function(){this.$router.push({name:"Perfil"})},obtenerDatos:function(){var e=this;d.obtener("obtener_datos_local.php").then(function(t){e.datosLocal=t,e.logo=S.generarUrlImagen(e.datosLocal.logo)})},salir:function(){var e=this;this.$buefy.dialog.confirm({title:"Cerrar Sesion?",message:"Deseas Cerrar Sesion",confirmText:"Sí, Cerrar",cancelText:"No",type:"is-danger",hasIcon:!0,onConfirm:function(){e.$emit("cerrar",!1),localStorage.removeItem("logeado"),e.$buefy.toast.open("Hasta pronto")}})}}},q={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("b-navbar",{staticClass:"fondo is-primary",scopedSlots:e._u([{key:"brand",fn:function(){return[s("b-navbar-item",[s("img",{attrs:{src:a("KAkA"),alt:"logo",width:"50",height:"100"}}),e._v(" "),s("span",{staticClass:"has-text-weight-bold"},[e._v(e._s(e.datosLocal.nombre))])])]},proxy:!0},{key:"start",fn:function(){return[s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[s("b-icon",{attrs:{icon:"home"}}),e._v(" "),s("span"),e._v("\n            Inicio\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/insumos"}}},[s("b-icon",{attrs:{icon:"food-fork-drink"}}),e._v(" "),s("span"),e._v("\n            Insumos\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/realizar-orden"}}},[s("b-icon",{attrs:{icon:"order-bool-ascending-variant"}}),e._v(" "),s("span"),e._v("\n            Ordenar\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/categorias"}}},[s("b-icon",{attrs:{icon:"archive-outline"}}),e._v(" "),s("span"),e._v("\n            Categorías\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/usuarios"}}},[s("b-icon",{attrs:{icon:"account-group"}}),e._v(" "),s("span"),e._v("\n            Usuarios\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/reporte-ventas"}}},[s("b-icon",{attrs:{icon:"cash-register"}}),e._v(" "),s("span"),e._v("\n            Ventas\n        ")],1),e._v(" "),s("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/configurar"}}},[s("b-icon",{attrs:{icon:"application-cog-outline"}}),e._v(" "),s("span"),e._v("\n            Configurar\n        ")],1)]},proxy:!0},{key:"end",fn:function(){return[s("b-navbar-item",{attrs:{tag:"div"}},[s("div",{staticClass:"buttons"},[s("a",{staticClass:"button is-warning",on:{click:e.irAPerfil}},[e._v("\n                   "+e._s(e.nombreUsuario)+"\n                ")]),e._v(" "),s("a",{staticClass:"button is-light",on:{click:e.salir}},[e._v("\n                   Cerrar Sesion\n                ")])])])]},proxy:!0}])})},staticRenderFns:[]},O={name:"Pie",data:function(){return{datosLocal:{}}},mounted:function(){this.obtenerDatos()},methods:{obtenerDatos:function(){var e=this;d.obtener("obtener_datos_local.php").then(function(t){e.datosLocal=t})}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticStyle:{"padding-top":"3em",bottom:"0"}},[a("footer",{staticClass:"footer fondo"},[a("div",{staticClass:"footer-content"},[e._m(0),e._v(" "),a("p",{staticClass:"titulo content title is-3 has-text-white"},[a("strong",[e._v(e._s(e.datosLocal.nombre))]),e._v(". Teléfono "),a("strong",[e._v(e._s(e.datosLocal.telefono))])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",{staticClass:"logo-container"},[t("img",{staticClass:"logo",attrs:{src:a("KAkA"),alt:"logo"}})])}]};var H={components:{Encabezado:a("VU/8")(V,q,!1,null,null,null).exports,Pie:a("VU/8")(O,M,!1,function(e){a("OYQi")},"data-v-609930f4",null).exports,Login:v,CambiarPassword:g,ConfiguracionInicial:P},name:"App",data:function(){return{logeado:!1,datos:"",cambiarPassword:!1,configurar:!1}},mounted:function(){this.verificarInformacion(),this.verificarSesion()&&(this.logeado=!0)},methods:{verificarInformacion:function(){var e=this;d.obtener("verificar_tablas.php").then(function(t){t.resultado>0?e.configurar=!1:e.configurar=!0})},verificarSesion:function(){var e=localStorage.getItem("logeado");return e||!1},onLog:function(e){if("cambia"===e.resultado)return this.cambiarPassword=!0,this.logeado=!0,localStorage.setItem("nombreUsuario",e.datos.nombreUsuario),void localStorage.setItem("idUsuario",e.datos.idUsuario);e.resultado&&(this.logeado=!0,localStorage.setItem("logeado",!0),localStorage.setItem("nombreUsuario",e.datos.nombreUsuario),localStorage.setItem("idUsuario",e.datos.idUsuario))},onClose:function(e){this.logeado=e}}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.configurar?a("configuracion-inicial"):e._e(),e._v(" "),e.logeado||e.configurar?e._e():a("login",{on:{logeado:e.onLog}}),e._v(" "),e.cambiarPassword?a("cambiar-password"):e._e(),e._v(" "),e.logeado&&!e.cambiarPassword?a("div",[a("encabezado",{on:{cerrar:e.onClose}}),e._v(" "),a("div",{staticClass:"container"},[a("router-view")],1),e._v(" "),a("pie")],1):e._e()],1)},staticRenderFns:[]},T=a("VU/8")(H,B,!1,null,null,null).exports,W=(a("csSS"),a("k5jX")),K=(a("/KV2"),a("/ocq")),X={name:"Login",data:function(){return{correo:"",password:"",cargando:!1}},methods:{ingresar:function(){var e=this;if(this.correo)if(this.password){this.cargando=!0;var t={correo:this.correo,password:this.password};d.obtenerConDatos(t,"iniciar_sesion.php").then(function(t){t.resultado?(e.$buefy.toast.open({message:"Datos correctos. Bienvenido",type:"is-success"}),localStorage.setItem("loggedIn",!0),localStorage.setItem("role",t.role),localStorage.setItem("nombre",t.nombre),"admin"===t.role?e.$router.push({name:"AdminDashboard"}):"user"===t.role&&e.$router.push({name:"UserDashboard"}),e.cargando=!1):(e.$buefy.toast.open({message:"Datos incorrectos. Verifica tu información",type:"is-danger"}),e.cargando=!1)}).catch(function(){e.$buefy.toast.open({message:"Error en la conexión. Inténtalo de nuevo",type:"is-danger"}),e.cargando=!1})}else this.$buefy.toast.open({message:"Debes colocar la contraseña",type:"is-warning"});else this.$buefy.toast.open({message:"Debes colocar el correo",type:"is-warning"})}}},G={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"hero is-fullheight fondo"},[s("div",{staticClass:"hero-body"},[s("div",{staticClass:"container"},[s("p",{staticClass:"title is-1 has-text-weight-bold has-text-white has-text-centered titulo"},[e._v("\n                Bienvenido a Cafeteria Alas  "),s("br"),e._v(" "),s("b-icon",{attrs:{icon:"account",size:"is-large"}}),e._v("\n                Inicio de sesión\n            ")],1),e._v(" "),s("div",{staticClass:"columns is-centered"},[s("div",{staticClass:"column is-5-tablet is-6-desktop is-6-widescreen"},[s("form",{staticClass:"box login-box",attrs:{action:""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.ingresar.apply(null,arguments))}}},[s("img",{staticClass:"logo",attrs:{src:a("KAkA"),alt:"Logo"}}),e._v(" "),s("p",{staticClass:"title is-3 has-text-centered"}),e._v(" "),s("b-field",[s("b-input",{attrs:{placeholder:"Correo electrónico",type:"email",icon:"email"},model:{value:e.correo,callback:function(t){e.correo=t},expression:"correo"}})],1),e._v(" "),s("b-field",[s("b-input",{attrs:{type:"password",placeholder:"Contraseña","password-reveal":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),s("div",{staticClass:"field has-text-centered"},[s("b-button",{attrs:{"icon-left":"login",type:"is-primary",size:"is-large"},on:{click:e.ingresar}},[e._v("Ingresar")])],1)],1)])]),e._v(" "),s("b-loading",{attrs:{"is-full-page":!0,"can-cancel":!1},model:{value:e.cargando,callback:function(t){e.cargando=t},expression:"cargando"}})],1)])])},staticRenderFns:[]};var J=a("VU/8")(X,G,!1,function(e){a("9J6t")},"data-v-2af67ca3",null).exports,Q={data:function(){return{nombre:localStorage.getItem("nombre")}}},Z={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Panel de Administración")]),this._v(" "),t("p",[this._v("Bienvenido, "+this._s(this.nombre)+". Aquí puedes gestionar usuarios e inventario.")])])},staticRenderFns:[]},Y=a("VU/8")(Q,Z,!1,null,null,null).exports,ee={data:function(){return{nombre:localStorage.getItem("nombre")}}},te={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("h1",[this._v("Panel de Usuario")]),this._v(" "),t("p",[this._v("Bienvenido, "+this._s(this.nombre)+". Aquí puedes ver los productos y realizar pedidos.")])])},staticRenderFns:[]},ae=a("VU/8")(ee,te,!1,null,null,null).exports;s.a.use(K.a);var se=[{path:"/",name:"Login",component:J},{path:"/admin",name:"AdminDashboard",component:Y,meta:{requiresAuth:!0,role:"admin"}},{path:"/user",name:"UserDashboard",component:ae,meta:{requiresAuth:!0,role:"user"}}],re=new K.a({routes:se});re.beforeEach(function(e,t,a){var s=localStorage.getItem("loggedIn"),r=localStorage.getItem("role");e.meta.requiresAuth&&!s?a({name:"Login"}):e.meta.role&&e.meta.role!==r?a("admin"===r?{name:"AdminDashboard"}:{name:"UserDashboard"}):a()});var ne=re;s.a.use(W.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:ne,components:{App:T},template:"<App/>"})},OYQi:function(e,t){},a7qD:function(e,t){},csSS:function(e,t){},o2Zv:function(e,t){},uslO:function(e,t,a){var s={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn-bd":"1C9R","./bn-bd.js":"1C9R","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-in":"yJfC","./en-in.js":"yJfC","./en-nz":"dyB6","./en-nz.js":"dyB6","./en-sg":"NYST","./en-sg.js":"NYST","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-mx":"USNP","./es-mx.js":"USNP","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fil":"rMbQ","./fil.js":"rMbQ","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./ga":"U5Iz","./ga.js":"U5Iz","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-deva":"VGQH","./gom-deva.js":"VGQH","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it-ch":"/E8D","./it-ch.js":"/E8D","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ku":"kI9l","./ku.js":"kI9l","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./oc-lnc":"KOFO","./oc-lnc.js":"KOFO","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tk":"+WRH","./tk.js":"+WRH","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-mo":"+WA1","./zh-mo.js":"+WA1","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function r(e){return a(n(e))}function n(e){var t=s[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(s)},r.resolve=n,e.exports=r,r.id="uslO"}},["NHnr"]);